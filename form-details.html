<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Details</title>
    <link rel="shortcut icon" href="image/logo_.png" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <main style="min-height:100vh;display:flex;align-items:center;justify-content:center;padding:40px;">
        <section style="width:100%;max-width:600px;border:1px solid #ddd;padding:20px;border-radius:12px;background:#fff;">
            <div>
                <p style="font-size:12px;color:#666;margin:0">Form Step 2</p>
                <h1 style="font-size:20px;margin:8px 0">Message Details</h1>
                <p id="status" style="color:green;font-size:14px;margin:0"></p>
            </div>

            <div id="details" style="margin-top:16px;"></div>

            <p style="margin-top:16px"><a href="index.html">Back to form</a></p>
        </section>
    </main>

    <script>
        const status = document.getElementById('status');
        const details = document.getElementById('details');
        const saved = localStorage.getItem('contactData');

        if (!saved) {
            status.textContent = 'No saved message found.';
            status.style.color = 'red';
            details.innerHTML = '<p>Please go back and submit the form.</p>';
        } else {
            try {
                const data = JSON.parse(saved); 
                status.textContent = 'Success! Here is what you sent.';
                status.style.color = 'green';

                const name = data.name || '-';
                const email = data.email || '-';
                const message = data.message || '-';

                details.innerHTML = ''
                    + '<p><strong>Name:</strong> ' + escapeHtml(name) + '</p>'
                    + '<p><strong>Email:</strong> ' + escapeHtml(email) + '</p>'
                    + '<p><strong>Message:</strong><br>' + escapeHtml(message) + '</p>';
            } catch (err) {
                console.error(err);
                status.textContent = 'We could not read your data.';
                status.style.color = 'red';
                details.innerHTML = '<p>Please submit the form again.</p>';
            }
        }

        function escapeHtml(str) {
            return String(str)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');
        }
    </script>
</body>
</html>
